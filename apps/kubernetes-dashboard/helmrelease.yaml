---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
spec:
  interval: 30m
  driftDetection:
    mode: enabled
  chart:
    spec:
      chart: kubernetes-dashboard
      version: 7.14.0
      sourceRef:
        kind: HelmRepository
        name: kubernetes-dashboard
        namespace: flux-system
      interval: 30m
  values:
    app:
      ingress:
        enabled: true
        ingressClassName: nginx
        hosts:
          - dashboard.${CLUSTER_DOMAIN}
        issuer:
          name: letsencrypt-prod
          scope: cluster
        tls:
          enabled: true
          secretName: dashboard-${CLUSTER_DOMAIN_TLS}-tls
